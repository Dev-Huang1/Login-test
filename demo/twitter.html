<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Twitter Login</title>
</head>
<body>
    <h1>Twitter Login</h1>
    <button id="loginButton">Login with Twitter</button>

    <script>
        const API_KEY = 'aLklx59uPPFpSpOQsXuS7i7Ko';
        const REDIRECT_URI = 'https://login-test.xyehr.cn/auth/twitter/callback'; // 必须与Twitter应用中设置的重定向URI一致

        document.getElementById('loginButton').addEventListener('click', () => {
            const twitterAuthUrl = `https://api.twitter.com/oauth2/authenticate?response_type=token&client_id=${API_KEY}&redirect_uri=${encodeURIComponent(REDIRECT_URI)}&scope=read&state=random_state_string`;

            window.location.href = twitterAuthUrl;
        });

        // 处理重定向后的响应
        window.onload = () => {
            const hash = window.location.hash;
            if (hash) {
                const token = hash.match(/access_token=([^&]*)/)[1];
                if (token) {
                    console.log('Access Token:', token);
                    // 你可以使用这个token来进行后续的API请求
                }
            }
        };
    </script>
</body>
</html>
